/*! For license information please see 469-79c5515e5c6876da.js.LICENSE.txt */
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[469],{59628:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(85893),s=n(67294),a=n(25675),_=n.n(a),o=n(45400),i=n.n(o),c=n(11163),l=n(10990),d=n(25317),u=n(43532),E=n.n(u),h=n(57210),p=n(5465);function f(){const{errorModal:e,setErrorModal:t}=(0,s.useContext)(h.S),[n,a]=(0,s.useState)(""),[o,u]=(0,s.useState)(""),f=(0,s.useRef)(null),m=(0,c.useRouter)().query.locale||i().i18n.defaultLocale;(0,s.useEffect)((()=>(p.y.getInstance().addEventListener(p.y.SERVER_ERROR,g),p.y.getInstance().addEventListener(p.y.TIMEOUT_ERROR,w),p.y.getInstance().addEventListener(p.y.MESSAGE_ERROR,R),()=>{p.y.getInstance().removeEventListener(p.y.SERVER_ERROR,g),p.y.getInstance().removeEventListener(p.y.TIMEOUT_ERROR,w),p.y.getInstance().removeEventListener(p.y.MESSAGE_ERROR,R)})),[]),(0,s.useEffect)((()=>{e?l.p8.to(f.current,.2,{css:{opacity:1,display:"block"},ease:d.EA.easeInOut}):l.p8.to(f.current,.2,{css:{opacity:0,display:"none"},ease:d.EA.easeInOut})}),[e]),(0,s.useEffect)((()=>{switch(o){case"serverError":a("ja"==m?"通信に失敗しました\nしばらく時間をおいて\n再度お試しください":"Connection error\nPlease try again later");break;case"timeoutError":a("ja"==m?"ただいまアクセスが集中しております\n時間をおいて再度アクセスしてください":"The server is busy\nPlease try again later");break;case"messageError":a("ja"==m?"該当するメッセージが\n見つかりませんでした":"Invalid URL")}}),[o,m]);const g=()=>{u("serverError"),t(!0)},w=()=>{u("timeoutError"),t(!0)},R=()=>{u("messageError"),t(!0)};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:E().errorModal,ref:f,children:(0,r.jsxs)("div",{className:E().container,children:[(0,r.jsx)(_(),{className:E().background,src:"/assets/drawing/images/errorModal/background.png",width:326,height:280,alt:"",priority:!0}),(0,r.jsx)("div",{className:E().text,children:(0,r.jsx)("p",{className:"ja"==m?E().ja:E().en,children:n})}),(0,r.jsx)("div",{className:E().close,children:(0,r.jsx)(_(),{src:"/assets/drawing/images/errorModal/close.png",width:81,height:15,alt:"Close",onClick:()=>{location.href="/"}})})]})})})}},21548:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(85893),s=n(67294),a=n(45400),_=n.n(a),o=n(11163),i=n(57210),c=n(5395),l=n.n(c);function d(){const e=(0,o.useRouter)().query.locale||_().i18n.defaultLocale,{setFontSizeRatio:t}=(0,s.useContext)(i.S),n=(0,s.useRef)(null),a=(0,s.useRef)(null),c=(0,s.useRef)(null);return(0,s.useEffect)((()=>((async()=>{await document.fonts.ready,setTimeout((()=>{if(n&&n.current&&a&&a.current&&c&&c.current){let r;r="ja"==e?a.current.offsetHeight/n.current.offsetWidth/.2265625:c.current.offsetHeight/n.current.offsetWidth/.2734375,window.innerWidth<640?Math.abs(1-r)<.036?t(1):t(r):t(1)}}),100)})(),()=>{})),[e]),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:l().fontSizeChecker,ref:n,children:[(0,r.jsx)("p",{className:l().ja,ref:a,children:"あ"}),(0,r.jsx)("p",{className:l().en,ref:c,children:"A"})]})})}},41959:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(85893),s=n(67294),a=n(25675),_=n.n(a),o=n(41766),i=n(13132),c=n.n(i),l=n(57210),d=n(91830);let u,E,h;function p(){const{cardType:e,state:t,lineTop:n,marginTop:a,setVolume:i,maxVolume:p,setMaxVolume:f}=(0,s.useContext)(l.S),[m,g]=(0,s.useState)(!0);(0,s.useEffect)((()=>(h=!0,d.V.getUrlVars().volume&&f(Number(d.V.getUrlVars().volume)),u||(u=9==e?new o.Howl({src:["/assets/drawing/audio/intro.mp3?"+Math.random()],loop:!0}):8==e?new o.Howl({src:["/assets/drawing/audio/introSpecial.mp3?"+Math.random()],loop:!0}):e>=5?new o.Howl({src:["/assets/drawing/audio/introDecember.mp3?"+Math.random()],loop:!0}):new o.Howl({src:["/assets/drawing/audio/intro.mp3?"+Math.random()],loop:!0}),u.volume(.36)),E||(E=9==e?new o.Howl({src:["/assets/drawing/audio/outro.mp3?"+Math.random()],loop:!0}):8==e||e>=5?new o.Howl({src:["/assets/drawing/audio/outroDecember.mp3?"+Math.random()],loop:!0}):new o.Howl({src:["/assets/drawing/audio/outro.mp3?"+Math.random()],loop:!0}),E.volume(.36)),document.addEventListener("visibilitychange",w),()=>{u&&(u.unload(),u=null),E&&(E.unload(),E=null),document.removeEventListener("visibilitychange",w)})),[]),(0,s.useEffect)((()=>{switch(t){case"intro":case"rcvIntro":break;case"loop":u&&!u.playing()&&u.play();break;case"rcvLoop":u&&!u.playing()&&(e>=5?setTimeout((()=>{u.play()}),150):u.play());break;case"check":u&&!u.playing()&&u.play(),E&&E.playing()&&(E.pause(),E.seek(0));break;case"outro":u&&u.playing()&&(u.pause(),u.seek(0)),E&&!E.playing()&&E.play()}}),[t]),(0,s.useEffect)((()=>{o.Howler.volume(p)}),[p]);const w=()=>{if(document.hidden)o.Howler.volume(0),i(!1);else if(h){const e=o.Howler.ctx;e&&"suspended"===e.state&&e.resume(),o.Howler.volume(p),i(!0)}};return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:c().sound,children:(0,r.jsx)("div",{className:c().button,onClick:()=>{m?(g(!1),i(!1),h=!1,o.Howler.volume(0)):(g(!0),i(!0),h=!0,o.Howler.volume(p))},style:{top:n-a},children:m?(0,r.jsx)(_(),{src:"/assets/drawing/images/sound/on.png",width:32,height:32,alt:"ON"}):(0,r.jsx)(_(),{src:"/assets/drawing/images/sound/off.png",width:32,height:32,alt:"OFF"})})})})}},5465:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var r=n(28046);class s extends r.p{static getInstance(){return this._instance||(this._instance=new s(s.getInstance)),this._instance}constructor(e){if(e!=s.getInstance)throw s._instance?new Error("既にインスタンスが存在するためエラー。"):new Error("コンストラクタの引数が不正な為エラー。");super()}}s.WINDOW_RESIZE="WINDOW_RESIZE",s.WINDOW_SCROLL="WINDOW_SCROLL",s.NG="NG",s.NG_CHECK_COMPLETE="NG_CHECK_COMPLETE",s.GOTO_PREVIEW="GOTO_PREVIEW",s.SEND="SEND",s.SEND_COMPLETE="SEND_COMPLETE",s.RECEIVE_COMPLETE="RECEIVE_COMPLETE",s.SERVER_ERROR="SERVER_ERROR",s.TIMEOUT_ERROR="TIMEOUT_ERROR",s.MESSAGE_ERROR="MESSAGE_ERROR"},67414:function(e,t,n){"use strict";n.d(t,{R:function(){return _}});var r=n(28046),s=n(5465),a=n(33287);class _{static validateMessage(){a.J.ngCheck.state="";var e=new XMLHttpRequest;let t={from_name:a.J.parameters.yourName,to_name:a.J.parameters.friendName,message:a.J.parameters.message};e.open("POST","https://dy2sclujfl.execute-api.eu-west-1.amazonaws.com/master/validate-message"),e.setRequestHeader("Content-Type","application/json"),e.send(JSON.stringify(t)),e.addEventListener("load",(function(){const e=JSON.parse(this.response).data;a.J.ngCheck.data=e,e.from_name&&e.to_name&&e.message?(a.J.ngCheck.state="ok",s.y.getInstance().dispatchEvent(new r.j(s.y.NG_CHECK_COMPLETE))):(a.J.ngCheck.state="ng",s.y.getInstance().dispatchEvent(new r.j(s.y.NG)))}),!1),e.addEventListener("error",(function(e){s.y.getInstance().dispatchEvent(new r.j(s.y.SERVER_ERROR))}),!1)}static message(e,t){var n=new XMLHttpRequest;let _={lang_code:t,card_type:e,from_name:a.J.parameters.yourName,to_name:a.J.parameters.friendName,message:a.J.parameters.message};n.open("POST","https://dy2sclujfl.execute-api.eu-west-1.amazonaws.com/master/message"),n.setRequestHeader("Content-Type","application/json"),n.send(JSON.stringify(_)),n.addEventListener("load",(function(){"N001"==JSON.parse(this.response).status?(a.J.message_id=JSON.parse(this.response).data.message_id,s.y.getInstance().dispatchEvent(new r.j(s.y.SEND_COMPLETE))):s.y.getInstance().dispatchEvent(new r.j(s.y.SERVER_ERROR))}),!1),n.addEventListener("error",(function(e){s.y.getInstance().dispatchEvent(new r.j(s.y.SERVER_ERROR))}),!1)}static messageMid(){a.J.messageMidTime=new Date;var e=new XMLHttpRequest;e.open("GET","https://dy2sclujfl.execute-api.eu-west-1.amazonaws.com/master/message?mid="+a.J.message_id),e.setRequestHeader("Content-Type","application/json"),e.send(),e.addEventListener("load",(function(){if("N001"==JSON.parse(this.response).status){const e=JSON.parse(this.response).data;a.J.parameters.yourName=e.from_name,a.J.parameters.friendName=e.to_name,a.J.parameters.message=decodeURI(e.message),s.y.getInstance().dispatchEvent(new r.j(s.y.RECEIVE_COMPLETE))}else s.y.getInstance().dispatchEvent(new r.j(s.y.MESSAGE_ERROR))}),!1),e.addEventListener("error",(function(e){s.y.getInstance().dispatchEvent(new r.j(s.y.SERVER_ERROR))}),!1)}}},28046:function(e,t,n){"use strict";n.d(t,{j:function(){return a},p:function(){return r}});class r{dispatchEvent(e){var t,n;if(e instanceof a?(n=e.type,t=e):t=new a(n=e),null!=this.listeners[n]){t.currentTarget=this;for(var r=0;r<this.listeners[n].length;r++){var s=this.listeners[n][r];try{s.handler(t)}catch(e){window.console}}}}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;null==this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].push(new s(e,t,n)),this.listeners[e].sort((function(e,t){return t.priolity-e.priolity}))}removeEventListener(e,t){if(this.hasEventListener(e,t))for(var n=0;n<this.listeners[e].length;n++){var r=this.listeners[e][n];if(r.equalCurrentListener(e,t))return r.handler=null,void this.listeners[e].splice(n,1)}}clearEventListener(){this.listeners={}}containEventListener(e){return null!=this.listeners[e]&&this.listeners[e].length>0}hasEventListener(e,t){if(null==this.listeners[e])return!1;for(var n=0;n<this.listeners[e].length;n++){if(this.listeners[e][n].equalCurrentListener(e,t))return!0}return!1}constructor(){this.listeners={}}}class s{equalCurrentListener(e,t){return this.type==e&&this.handler==t}constructor(e=null,t=null,n=0){this.type=e,this.handler=t,this.priolity=n}}class a{constructor(e=null,t=null){this.type=e,this.value=t}}a.COMPLETE="complete",a.CHANGE_PROPERTY="changeProperty"},91830:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});class r{static ratio(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:750;return window.innerWidth>=640?480/t*e:window.innerWidth/t*e}static getUrlVars(){const e={},t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(let n=0;n<t.length;n++){const r=t[n].split("=");e[r[0]]=r[1]||""}return e}}},43532:function(e){e.exports={wrap_container:"ErrorModal_wrap_container__08_EU",drawing:"ErrorModal_drawing__4jpxN",___ja___:"ErrorModal____ja_____fkBMB",___ja_rcv___:"ErrorModal____ja_rcv_____GAkKs",___en___:"ErrorModal____en_____wZaeJ",___off___:"ErrorModal____off_____fKQMd",errorModal:"ErrorModal_errorModal__OhjPs",container:"ErrorModal_container__lK7uk",background:"ErrorModal_background__WjK5Y",text:"ErrorModal_text__ti_6p",ja:"ErrorModal_ja__jAfC5",en:"ErrorModal_en__pCGNC",close:"ErrorModal_close__eYkuc"}},5395:function(e){e.exports={wrap_container:"FontSizeChecker_wrap_container__lFHs9",drawing:"FontSizeChecker_drawing__wld4O",___ja___:"FontSizeChecker____ja_____4K7A2",___ja_rcv___:"FontSizeChecker____ja_rcv_____OwPpl",___en___:"FontSizeChecker____en_____5CQuv",___off___:"FontSizeChecker____off_____rflDs",fontSizeChecker:"FontSizeChecker_fontSizeChecker__7jT5Q",ja:"FontSizeChecker_ja__1u_cG",en:"FontSizeChecker_en__Ki7iY"}},13132:function(e){e.exports={wrap_container:"Sound_wrap_container__AXvf4",drawing:"Sound_drawing__kE_fR",___ja___:"Sound____ja_____TBWIK",___ja_rcv___:"Sound____ja_rcv_____j78CS",___en___:"Sound____en_____h3Zgv",___off___:"Sound____off_____QhlJv",sound:"Sound_sound__WiXPS",button:"Sound_button__9XeKY"}},45787:function(e){e.exports={wrap_container:"drawing_wrap_container__5kIHB",drawing:"drawing_drawing__0yAJF",___ja___:"drawing____ja_____C__Cr",___ja_rcv___:"drawing____ja_rcv_____ovjFT",___en___:"drawing____en_____yquo0",___off___:"drawing____off_____ZWNbT"}}}]);